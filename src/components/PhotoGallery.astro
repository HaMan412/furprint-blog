---
// 1. ç»„ä»¶å±æ€§å®šä¹‰
export interface Photo {
  src: string;
  alt: string;
  date?: string;
  category?: string;
}
export interface Props {
  photos: Photo[];
}
const { photos } = Astro.props;
---

<!-- 2. ç€‘å¸ƒæµå¸ƒå±€ç»“æ„ -->
<div class="gallery-container">
  {photos.map((photo) => (
    <div class="photo-card" 
         data-category={photo.category || 'default'}>
      <img
        src={photo.src}
        alt={photo.alt}
        loading="lazy"
        width="400"
        height="600"
        class="gallery-image"
      />
      <div class="image-overlay">
        <p>{photo.alt}</p>
        {photo.date && <span>ğŸ“… {photo.date}</span>}
      </div>
    </div>
  ))}
</div>

<!-- 3. æ ·å¼è®¾è®¡ -->
<style>
  /* ç€‘å¸ƒæµæ ¸å¿ƒå®ç° [1,8](@ref) */
  .gallery-container {
    column-count: 4; /* ç”µè„‘ç«¯4åˆ— */
    column-gap: 20px;
  }

  .photo-card {
    break-inside: avoid;
    margin-bottom: 20px;
    border-radius: 10px;
    overflow: hidden;
    position: relative;
    transition: all 0.4s ease;
  }

  /* å“åº”å¼å¸ƒå±€è°ƒæ•´ */
  @media (max-width: 1200px) {
    .gallery-container { column-count: 3; }
  }
  @media (max-width: 768px) {
    .gallery-container { column-count: 2; }
  }
  @media (max-width: 480px) {
    .gallery-container { column-count: 1; }
  }

  /* æ‚¬åœå‡¸èµ·æ•ˆæœ [9,11](@ref) */
  .photo-card:hover {
    transform: translateY(-8px) scale(1.03);
    box-shadow: 0 20px 30px rgba(0,0,0,0.2);
    z-index: 10;
  }

  .gallery-image {
    width: 100%;
    height: auto;
    transition: transform 0.5s;
  }

  .photo-card:hover .gallery-image {
    transform: scale(1.05);
  }

  /* ä¿¡æ¯é®ç½©å±‚ */
  .image-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(transparent, rgba(0,0,0,0.7));
    color: white;
    padding: 1.5rem 1rem 0.8rem;
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.4s ease;
  }

  .photo-card:hover .image-overlay {
    opacity: 1;
    transform: translateY(0);
  }
</style>